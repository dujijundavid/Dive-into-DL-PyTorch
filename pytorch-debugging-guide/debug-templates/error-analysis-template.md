# PyTorch 错误分析模板 🤖

> 专为与 LLM（Cursor Copilot、ChatGPT等）交互设计的标准化调试模板

## 📋 基础错误分析模板

### 模板使用方法
1. 复制下面的模板
2. 填入你的具体信息
3. 直接发送给 LLM

### 🔧 标准错误分析模板

```
我在运行以下 PyTorch 代码时出现了错误，请帮我解释这个错误并给出修复建议：

**错误堆栈信息：**
```
[在这里粘贴完整的错误堆栈信息]
```

**问题代码：**
```python
[在这里粘贴出问题的代码片段]
```

**运行环境：**
- PyTorch 版本：
- Python 版本：
- CUDA 版本（如使用）：
- 操作系统：

**问题描述：**
[简要描述你期望的行为和实际发生的问题]

**请帮我：**
1. 判断这是 API 用法错误、数据维度问题，还是梯度相关问题
2. 如果可能，给我一个修改后的可运行版本
3. 给我一个解释，使我能从原理理解这个错误

你是一个深入理解 PyTorch 架构的调试专家，解释要具体、分步骤。
```

## 🎯 专门化模板

### 梯度问题专用模板

```
我的 PyTorch 模型训练中出现梯度相关问题：

**现象描述：**
- [ ] 梯度爆炸（损失快速增大到 inf）
- [ ] 梯度消失（损失不降，梯度接近0）
- [ ] 梯度为 None
- [ ] 参数不更新

**训练代码：**
```python
[粘贴你的训练循环代码]
```

**模型架构：**
```python
[粘贴你的模型定义]
```

**关键参数：**
- 学习率：
- 批大小：
- 数据规模（输入/目标的典型值范围）：
- 网络深度：

**观察到的数值：**
- 典型损失值：
- 梯度范数：
- 参数更新前后对比：

请从第一性原理分析梯度传播机制，定位问题根源并提供系统性解决方案。
```

### 维度错误专用模板

```
我遇到了 PyTorch 维度不匹配错误：

**错误信息：**
```
[粘贴完整的维度错误信息]
```

**相关代码：**
```python
[粘贴出错的代码行及其上下文]
```

**张量形状信息：**
- 输入张量 A 形状：
- 输入张量 B 形状：
- 期望输出形状：
- 实际操作：

**模型结构（如相关）：**
```python
[粘贴模型定义，特别是出错的层]
```

请帮我：
1. 分析维度不匹配的具体原因
2. 提供正确的维度变换方法
3. 给出预防类似问题的最佳实践
```

### 性能问题专用模板

```
我的 PyTorch 代码存在性能问题：

**问题类型：**
- [ ] 内存不足（CUDA OOM）
- [ ] 训练速度慢
- [ ] GPU 利用率低
- [ ] 数据加载瓶颈

**系统信息：**
- GPU 型号和显存：
- 批大小：
- 模型参数量：
- 数据集大小：

**相关代码：**
```python
[粘贴相关的训练代码]
```

**性能指标（如有）：**
- 内存使用情况：
- 训练速度（samples/sec）：
- GPU 利用率：

请分析性能瓶颈并提供优化建议。
```

## 🔍 渐进式调试策略模板

### 分步调试模板

```
我想系统性地调试以下 PyTorch 问题：

**第一步：问题定位**
[描述观察到的现象]

**第二步：最小复现**
```python
[提供最小可复现的代码片段]
```

**第三步：关键假设**
我怀疑问题可能是：
1. [假设1]
2. [假设2]
3. [假设3]

**第四步：验证方法**
请帮我设计验证每个假设的最简单方法，并逐步排除问题。

我希望理解问题的本质，而不仅仅是快速修复。
```

## 📚 专家级分析请求模板

### 深度分析模板

```
作为 PyTorch 专家，请帮我深度分析以下问题：

**背景：**
[描述你的项目背景和目标]

**技术细节：**
```python
[粘贴详细的代码]
```

**已尝试的解决方案：**
1. [方案1及结果]
2. [方案2及结果]
3. [方案3及结果]

**深度分析需求：**
1. 从 PyTorch 自动微分机制角度分析问题
2. 从数值计算角度解释现象
3. 提供不同层次的解决方案（快速修复 vs 系统重构）
4. 推荐相关的 PyTorch 最佳实践

请像教学一样解释，帮助我建立系统性的理解。
```

## 💡 使用技巧

### 提高LLM响应质量的技巧：

1. **提供完整上下文**：包含完整的错误信息和相关代码
2. **明确期望**：说明你想要理解原理还是快速修复
3. **分阶段提问**：复杂问题可以分步骤递进询问
4. **提供具体数值**：张量shape、loss值、梯度范数等具体数字
5. **说明已尝试方案**：避免LLM推荐你已经试过的方法

### 与Cursor Copilot交互的最佳实践：

1. 在相关文件中选中问题代码再提问
2. 使用 `@codebase` 引用相关文件
3. 利用 `@docs` 查询官方文档
4. 保持上下文连贯，避免频繁切换话题

---
*让每次调试都成为深度学习的机会* 🚀 